<ion-content>
  @if (!showRegisterForm) {
  <div>
  
  <ion-header>
  <ion-toolbar class="pt-4">
    <ion-buttons slot="start">
      <ion-button (click)="goBack()">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Login</ion-title>
  </ion-toolbar>
</ion-header>
  


<!-- Phone number input with +91 -->
@if (!otpSent) {
  <ion-card-title class="mx-3 mt-4">
  Login with Phone Number
</ion-card-title>
  <ion-item class="custom-input mt-4 mx-3 d-flex align-items-center">
  <ion-label class="country-code text-muted" position="start">+91</ion-label>
  <ion-input
    [(ngModel)]="phoneNumber"
    type="text"
    inputmode="numeric"
    maxlength="10"
    placeholder="Enter mobile number"
  ></ion-input>
</ion-item>
}
<div class="w-100 px-4 position-fixed bottom-0">
  @if (!otpSent) {
    <ion-button class="w-100 ion-padding" color="dark" (click)="sendVerification()">Send OTP</ion-button>
  } @else {
    <ion-button class="w-100 ion-padding" color="dark" (click)="verifyOTP()">Verify OTP</ion-button>
  }
</div>



@if (otpSent) {
  <ion-card-title class="mx-3 mt-4 text-center">
  Enter OTP Sent to +91 {{phoneNumber}}
</ion-card-title>
  <div class="w-100 d-flex justify-content-center mt-3">
  <ng-otp-input class="custom-input" (onInputChange)="onOtpChange($event)" [config]="otpConfig"></ng-otp-input>
</div>
<div class="mx-5 mt-3 text-center">
  <p>Didn't get otp? <i class="text-primary resend" (click)="sendVerification()">Resend</i></p>
</div>
}


<!-- OTP input -->
<!-- <ion-item class="custom-input otp-input mx-4">
  <ion-label position="floating">OTP</ion-label>
  <ion-input
    [(ngModel)]="verificationCode"
    type="number"
    inputmode="numeric"
    maxlength="6"
    placeholder="123456"
  ></ion-input>
</ion-item> -->


</div>
} @else {
 <div>
      <ion-header>
  <ion-toolbar class="pt-4">
    <ion-buttons slot="start">
      <ion-button (click)="goBack()">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>New User Registration</ion-title>
  </ion-toolbar>
</ion-header>

<ion-card-title class="mx-3 mt-4">
  Welcome to OneApp. Please enter your details
</ion-card-title>

<div class="mx-3 mt-3">
  <ion-input class="mt-3" label="Full name" label-placement="floating" [(ngModel)]="fullName" fill="outline" placeholder="Enter your full name"></ion-input>
  <ion-input class="mt-3" label="Email" label-placement="floating" [(ngModel)]="email" fill="outline" placeholder="Enter your email"></ion-input>
</div>

<div class="w-100 px-4 position-fixed bottom-0">
    <ion-button class="w-100 ion-padding" color="dark" [disabled]="isLoading" (click)="login()">Submit
      @if (isLoading) {
        <ion-spinner class="ms-2 fs-1"  name="crescent"></ion-spinner>
}
    </ion-button>
  </div>

  
 </div>
}

</ion-content>
